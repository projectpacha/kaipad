import{kai}from"./kai.js";var input=document.querySelector("#input"),output=document.querySelector("#output"),clearInput=document.querySelector("#clear1"),clearOutput=document.querySelector("#clear2"),select=document.getElementById("selector"),info=document.getElementById("info");window.onload=function(){options(),document.querySelector("#menu_checkbox").addEventListener("click",()=>{var e=document.querySelector(".container");"block"===e.style.display?e.style.display="none":e.style.display="block"}),document.querySelector("#langs").addEventListener("click",()=>{document.querySelector(".container").style.display="block"})};var options=()=>{var e=select.value;"iso"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toISO(kai.fromDrav(input.value))})):"ipa"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toIPA(kai.fromDrav(input.value))})):"gon"==e?(info.innerHTML='Font: <a href="https://fonts.google.com/noto/specimen/Noto+Sans+Gunjala+Gondi">Noto Sans Gunjala Gondi</a>',input.addEventListener("keyup",()=>{output.value=kai.toGon(kai.fromDrav(input.value))})):"gra"==e?(info.innerHTML='Font: <a href="https://fonts.google.com/noto/specimen/Noto+Sans+Grantha">Noto Sans Grantha</a>',input.addEventListener("keyup",()=>{output.value=kai.toGra(kai.fromDrav(input.value))})):"kan"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toKan(kai.fromDrav(input.value))})):"mal"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toMal(kai.fromDrav(input.value))})):"tam"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toTa(kai.fromDrav(input.value))})):"tel"==e?(info.innerHTML="",input.addEventListener("keyup",()=>{output.value=kai.toTel(kai.fromDrav(input.value))})):"arml"==e&&(info.innerHTML='Font: <a href="https://fonts.google.com/specimen/Scheherazade+New">Scheherazade New</a>',input.addEventListener("keyup",()=>{output.value=kai.toArml(kai.fromDrav(input.value))}))};function changeListener(){options()}document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("saved");for(const t of select)t.selected=e===t.value;select.addEventListener("change",function(){localStorage.setItem("saved",this.value)})}),document.getElementById("selector").onchange=changeListener,document.querySelector("#trans").addEventListener("click",()=>{var e=select.value;"iso"==e?output.value=kai.toISO(kai.fromDrav(input.value)):"ipa"==e?output.value=kai.toIPA(kai.fromDrav(input.value)):"gon"==e?output.value=kai.toGon(kai.fromDrav(input.value)):"gra"==e?output.value=kai.toGra(kai.fromDrav(input.value)):"kan"==e?output.value=kai.toKan(kai.fromDrav(input.value)):"mal"==e?output.value=kai.toMal(kai.fromDrav(input.value)):"tam"==e?output.value=kai.toTa(kai.fromDrav(input.value)):"tel"==e?output.value=kai.toTel(kai.fromDrav(input.value)):"arml"==e&&(output.value=kai.toArml(kai.fromDrav(input.value)))}),clearInput.addEventListener("click",()=>input.value=""),clearOutput.addEventListener("click",()=>output.value=""),document.querySelector("#copy").addEventListener("click",()=>{var e=document.getElementById("output");e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value)});const defaultLocale="en";let locale,translations={};async function setLocale(e){if(e===locale)return;const t=await fetchTranslationsFor(e);locale=e,translations=t,document.documentElement.dir=dir(e),translatePage()}async function fetchTranslationsFor(e){const t=await fetch(`/lang/${e}.json`);return await t.json()}function translatePage(){document.querySelectorAll("[data-i18n-key]").forEach(translateElement)}function translateElement(e){const t=e.getAttribute("data-i18n-key"),a=translations[t];e.innerText=a}function bindLocaleSwitcher(e){const t=document.querySelector("[data-i18n-switcher]");t.value=e,t.onchange=(e=>{setLocale(e.target.value)})}function dir(e){return"ar"===e?"rtl":"ltr"}document.addEventListener("DOMContentLoaded",()=>{bindLocaleSwitcher("en"),setLocale("en")});
